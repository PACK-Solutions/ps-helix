<ds-demo-page-layout
  title="Système de Switches"
  introText="Les switches permettent aux utilisateurs d'activer ou désactiver une option de manière intuitive et visuelle. Compatible avec les Reactive Forms et accessible, ils offrent une alternative moderne aux checkboxes pour les états binaires."
  [showTechnicalSection]="false"
>
  <div demo-content>
    <!-- Positions du Label - Section Pleine Largeur -->
    <section class="switch-label-section">
      <h3 class="section-title">Positions du Label</h3>
      <div class="label-container">
        <div class="label-intro">
          <p>Les switches permettent de positionner le label à droite ou à gauche du contrôle pour s'adapter à différentes configurations de mise en page.</p>
        </div>
        <div class="label-grid">
          <div class="label-card">
            <div class="label-preview">
              <psh-switch [(checked)]="rightLabelChecked" labelPosition="right">
                Label à droite
              </psh-switch>
            </div>
            <div class="label-info">
              <h4>Label à Droite (Standard)</h4>
              <p>Position standard avec le label placé à droite du switch. C'est le comportement par défaut.</p>
              <ds-code-snippet [code]="rightLabelCode" />
            </div>
          </div>

          <div class="label-card">
            <div class="label-preview">
              <psh-switch [(checked)]="leftLabelChecked" labelPosition="left">
                Label à gauche
              </psh-switch>
            </div>
            <div class="label-info">
              <h4>Label à Gauche</h4>
              <p>Position alternative avec le label placé à gauche du switch. Utile pour certaines mises en page spécifiques.</p>
              <ds-code-snippet [code]="leftLabelCode" />
            </div>
          </div>

          <div class="label-card">
            <div class="label-preview">
              <psh-switch [(checked)]="defaultChecked">
                Switch avec contenu projeté
              </psh-switch>
            </div>
            <div class="label-info">
              <h4>Contenu Projeté</h4>
              <p>Utilisez le contenu projeté (ng-content) pour personnaliser le label avec du HTML riche ou des composants Angular.</p>
              <ds-code-snippet [code]="projectedContentCode" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- États des Switches - Section Pleine Largeur -->
    <section class="switch-states-section">
      <h3 class="section-title">États des Switches</h3>
      <div class="states-container">
        <div class="states-intro">
          <p>Les switches supportent plusieurs états pour communiquer différentes informations visuelles et contextuelles aux utilisateurs.</p>
        </div>
        <div class="states-grid">
          <div class="state-card">
            <div class="state-preview">
              <psh-switch [disabled]="true" [(checked)]="disabledUnchecked">
                Switch désactivé non coché
              </psh-switch>
              <psh-switch [disabled]="true" [(checked)]="disabledChecked">
                Switch désactivé coché
              </psh-switch>
            </div>
            <div class="state-info">
              <h4>Désactivé</h4>
              <p>État désactivé pour les options non disponibles ou non modifiables. Le switch ne peut pas être activé par l'utilisateur.</p>
              <ds-code-snippet [code]="disabledCode" />
            </div>
          </div>

          <div class="state-card">
            <div class="state-preview">
              <psh-switch
                [(checked)]="errorChecked"
                error="Ce champ est requis"
              >
                Switch avec erreur
              </psh-switch>
            </div>
            <div class="state-info">
              <h4>Erreur</h4>
              <p>État d'erreur avec message pour indiquer une validation échouée. Le message est lié au switch pour l'accessibilité.</p>
              <ds-code-snippet [code]="errorCode" />
            </div>
          </div>

          <div class="state-card">
            <div class="state-preview">
              <psh-switch
                [(checked)]="successChecked"
                success="Sélection valide"
              >
                Switch avec succès
              </psh-switch>
            </div>
            <div class="state-info">
              <h4>Succès</h4>
              <p>État de succès avec message pour confirmer une sélection valide. Idéal pour les validations en temps réel.</p>
              <ds-code-snippet [code]="successCode" />
            </div>
          </div>

          <div class="state-card">
            <div class="state-preview">
              <psh-switch
                [(checked)]="requiredChecked"
                [required]="true"
              >
                Switch requis
              </psh-switch>
            </div>
            <div class="state-info">
              <h4>Requis</h4>
              <p>Marque le champ comme obligatoire avec l'attribut <code>aria-required</code> pour les lecteurs d'écran.</p>
              <ds-code-snippet [code]="requiredCode" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tailles Disponibles - Section Pleine Largeur -->
    <section class="switch-sizes-section">
      <h3 class="section-title">Tailles Disponibles</h3>
      <div class="sizes-container">
        <div class="sizes-intro">
          <p>Trois tailles sont disponibles pour s'adapter à différents contextes d'utilisation et densités d'interface.</p>
        </div>
        <div class="sizes-grid">
          <div class="size-card">
            <div class="size-preview">
              <psh-switch size="small" [(checked)]="smallChecked">
                Petit switch
              </psh-switch>
            </div>
            <div class="size-info">
              <h4>Small</h4>
              <div class="size-specs">
                <span class="size-dimension">Compact et discret</span>
                <code class="size-code">size="small"</code>
              </div>
              <p class="size-usage">Idéal pour les interfaces denses, les tableaux de données ou les listes détaillées nécessitant peu d'espace.</p>
            </div>
          </div>

          <div class="size-card">
            <div class="size-preview">
              <psh-switch size="medium" [(checked)]="mediumChecked">
                Switch moyen
              </psh-switch>
            </div>
            <div class="size-info">
              <h4>Medium (Défaut)</h4>
              <div class="size-specs">
                <span class="size-dimension">Taille équilibrée</span>
                <code class="size-code">size="medium"</code>
              </div>
              <p class="size-usage">Taille par défaut, équilibrée pour la plupart des cas d'usage et une bonne lisibilité sur tous les appareils.</p>
            </div>
          </div>

          <div class="size-card">
            <div class="size-preview">
              <psh-switch size="large" [(checked)]="largeChecked">
                Grand switch
              </psh-switch>
            </div>
            <div class="size-info">
              <h4>Large</h4>
              <div class="size-specs">
                <span class="size-dimension">Grande visibilité</span>
                <code class="size-code">size="large"</code>
              </div>
              <p class="size-usage">Pour plus de visibilité et les interfaces tactiles nécessitant une zone de contact étendue.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Intégration Reactive Forms - Section Pleine Largeur -->
    <section class="switch-forms-section">
      <h3 class="section-title">Intégration Reactive Forms</h3>
      <div class="forms-container">
        <div class="forms-intro">
          <p>Le switch implémente <code>ControlValueAccessor</code> pour une intégration parfaite avec les Reactive Forms d'Angular.</p>
        </div>
        <div class="forms-content">
          <div class="forms-demo">
            <h4>Exemple Interactif</h4>
            <form [formGroup]="settingsForm" (ngSubmit)="onFormSubmit()">
              <div class="form-group">
                <psh-switch formControlName="notifications">
                  Activer les notifications
                </psh-switch>
              </div>

              <div class="form-group">
                <psh-switch formControlName="emailAlerts">
                  Alertes par email
                </psh-switch>
              </div>

              <div class="form-group">
                <psh-switch formControlName="darkMode" [required]="true">
                  Mode sombre (requis)
                </psh-switch>
              </div>

              <div class="form-group">
                <psh-switch formControlName="analytics">
                  Statistiques d'utilisation
                </psh-switch>
              </div>

              <div class="form-status">
                <p><strong>État du formulaire:</strong> {{ settingsForm.valid ? 'Valide' : 'Invalide' }}</p>
                <p><strong>Valeurs:</strong></p>
                <pre>{{ settingsForm.value | json }}</pre>
              </div>
            </form>
          </div>
          <div class="forms-doc">
            <h4>Caractéristiques</h4>
            <ul class="feature-list">
              <li><strong>formControlName</strong> : Liaison directe avec FormControl</li>
              <li><strong>Validation</strong> : Support des validators Angular natifs (required, custom validators)</li>
              <li><strong>Disabled state</strong> : Géré automatiquement par le FormControl</li>
              <li><strong>Two-way sync</strong> : Valeur synchronisée bidirectionnellement avec le formulaire</li>
              <li><strong>Touched state</strong> : Détection automatique des interactions utilisateur</li>
            </ul>
            <ds-code-snippet [code]="reactiveFormsCode" />
          </div>
        </div>
      </div>
    </section>

    <!-- Documentation API - Section Pleine Largeur -->
    <section class="api-section">
      <h3 class="section-title">Documentation API</h3>
      <div class="api-container">
        <div class="api-intro">
          <p>Le composant Switch utilise des <strong>inputs bidirectionnels</strong> pour une synchronisation de l'état, conforme aux standards Angular 21.</p>
        </div>

        <div class="api-table-wrapper">
          <h4>Inputs Bidirectionnels (avec <code>[()]</code>)</h4>
          <table class="api-table">
            <thead>
              <tr>
                <th>Propriété</th>
                <th>Type</th>
                <th>Défaut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>checked</code></td>
                <td><code>boolean</code></td>
                <td><code>false</code></td>
                <td>État coché du switch. Utiliser avec [(checked)]</td>
              </tr>
              <tr>
                <td><code>disabled</code></td>
                <td><code>boolean</code></td>
                <td><code>false</code></td>
                <td>État désactivé du switch</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="api-table-wrapper">
          <h4>Propriétés (Input Signals)</h4>
          <table class="api-table">
            <thead>
              <tr>
                <th>Propriété</th>
                <th>Type</th>
                <th>Défaut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>required</code></td>
                <td><code>boolean</code></td>
                <td><code>false</code></td>
                <td>Indique si le switch est requis</td>
              </tr>
              <tr>
                <td><code>size</code></td>
                <td><code>SwitchSize</code></td>
                <td><code>'medium'</code></td>
                <td>'small' | 'medium' | 'large'</td>
              </tr>
              <tr>
                <td><code>labelPosition</code></td>
                <td><code>'left' | 'right'</code></td>
                <td><code>'right'</code></td>
                <td>Position du label par rapport au switch</td>
              </tr>
              <tr>
                <td><code>label</code></td>
                <td><code>string</code></td>
                <td><code>''</code></td>
                <td>Label du switch (alternative au contenu projeté)</td>
              </tr>
              <tr>
                <td><code>error</code></td>
                <td><code>string</code></td>
                <td><code>''</code></td>
                <td>Message d'erreur à afficher</td>
              </tr>
              <tr>
                <td><code>success</code></td>
                <td><code>string</code></td>
                <td><code>''</code></td>
                <td>Message de succès à afficher</td>
              </tr>
              <tr>
                <td><code>ariaLabel</code></td>
                <td><code>string | undefined</code></td>
                <td><code>undefined</code></td>
                <td>Label ARIA personnalisé pour l'accessibilité</td>
              </tr>
              <tr>
                <td><code>name</code></td>
                <td><code>string | undefined</code></td>
                <td><code>undefined</code></td>
                <td>Attribut name de l'input natif</td>
              </tr>
              <tr>
                <td><code>id</code></td>
                <td><code>string</code></td>
                <td><code>auto-généré</code></td>
                <td>ID unique du switch (auto-généré si non fourni)</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="api-table-wrapper">
          <h4>Événements (Outputs)</h4>
          <table class="api-table">
            <thead>
              <tr>
                <th>Événement</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>checkedChange</code></td>
                <td><code>EventEmitter&lt;boolean&gt;</code></td>
                <td>Émis lors du changement d'état du switch</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="api-table-wrapper">
          <h4>Méthodes Publiques</h4>
          <table class="api-table">
            <thead>
              <tr>
                <th>Méthode</th>
                <th>Signature</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>focus()</code></td>
                <td><code>(): void</code></td>
                <td>Donne le focus programmatiquement au switch</td>
              </tr>
              <tr>
                <td><code>blur()</code></td>
                <td><code>(): void</code></td>
                <td>Retire le focus programmatiquement du switch</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="api-usage-example">
          <h4>Exemple d'Utilisation Complète</h4>
          <div class="code-block">
            <pre><code>import &#123; PshSwitchComponent &#125; from 'ps-helix';

&#64;Component(&#123;
  standalone: true,
  imports: [PshSwitchComponent],
  template: `
    &lt;psh-switch
      [(checked)]="isEnabled"
      [disabled]="isDisabled"
      [required]="isRequired"
      size="medium"
      labelPosition="right"
      [error]="errorMessage"
      [success]="successMessage"
      ariaLabel="Activer les notifications"
      (checkedChange)="handleChange($event)"
    &gt;
      Activer les notifications
    &lt;/psh-switch&gt;
  `
&#125;)
export class MyComponent &#123;
  isEnabled = false;
  isDisabled = false;
  isRequired = true;
  errorMessage = '';
  successMessage = '';

  handleChange(checked: boolean): void &#123;
    console.log('Switch changed:', checked);
  &#125;
&#125;</code></pre>
          </div>
        </div>

        <div class="api-best-practices">
          <h4>Bonnes Pratiques d'Accessibilité</h4>
          <ul class="best-practices-list">
            <li><strong>Navigation clavier</strong> : Les switches supportent la navigation par <kbd>Tab</kbd>, activation par <kbd>Espace</kbd> et <kbd>Entrée</kbd></li>
            <li><strong>Focus visible</strong> : Un anneau de focus visible conforme aux tokens de design entoure le switch lors de la navigation au clavier</li>
            <li><strong>ARIA automatique</strong> : Les attributs <code>aria-checked</code>, <code>aria-invalid</code>, <code>aria-required</code> et <code>aria-describedby</code> sont gérés automatiquement</li>
            <li><strong>Labels</strong> : Toujours fournir un label via contenu projeté, input <code>label</code> ou <code>ariaLabel</code> pour les lecteurs d'écran</li>
            <li><strong>Messages</strong> : Les messages d'erreur/succès sont liés au switch via des IDs uniques générés automatiquement pour les lecteurs d'écran</li>
            <li><strong>Reduced motion</strong> : Le composant respecte la préférence utilisateur <code>prefers-reduced-motion</code> pour les animations</li>
            <li><strong>Contraste</strong> : Tous les états respectent les ratios de contraste WCAG 2.1 AA (minimum 4.5:1)</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</ds-demo-page-layout>
