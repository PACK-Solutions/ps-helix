<div 
  class="modal-backdrop"
  [class.open]="open"
  (click)="handleBackdropClick($event)"
  role="dialog"
  aria-modal="true"
  [attr.aria-hidden]="!open"
  [attr.aria-labelledby]="title ? 'modal-title' : undefined"
>
  <div 
    class="modal-container"
    [class.small]="size === 'small'"
    [class.large]="size === 'large'"
    role="document"
  >
    <div #modalContent class="modal-content-wrapper">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title">{{ title }}</h2>
        @if (showClose) {
          <button 
            class="modal-close"
            (click)="handleClose()"
            [attr.aria-label]="'MODAL.CLOSE' | translate"
          >
            <i class="ph ph-x" aria-hidden="true"></i>
          </button>
        }
      </div>

      <div class="modal-content">
        <ng-content></ng-content>
      </div>

      @if (showFooter) {
        <div class="modal-footer">
          <ng-content select="[modal-footer]"></ng-content>
          @if (!hasCustomFooter()) {
            <lib-button
              variant="outline"
              size="medium"
              (clicked)="handleClose()"
            >
              {{ 'MODAL.CANCEL' | translate }}
            </lib-button>
            <lib-button
              variant="primary"
              size="medium"
              (clicked)="handleConfirm()"
            >
              {{ 'MODAL.CONFIRM' | translate }}
            </lib-button>
          }
        </div>
      }
    </div>
  </div>
</div>